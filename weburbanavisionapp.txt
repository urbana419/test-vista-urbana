<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Vista - Urbana Visi√≥n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            width: 60px;
            height: 60px;
            background: #4f46e5;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
        }
        
        h1 {
            font-size: 24px;
            color: #1f2937;
            margin-bottom: 5px;
        }
        
        .subtitle {
            color: #6b7280;
            font-size: 14px;
        }
        
        .instructions {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .instructions h3 {
            color: #92400e;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .step {
            display: flex;
            margin-bottom: 12px;
            font-size: 14px;
            color: #92400e;
        }
        
        .step-number {
            background: #f59e0b;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            font-size: 12px;
            flex-shrink: 0;
        }
        
        .test-area {
            text-align: center;
            padding: 40px 20px;
            background: #f9fafb;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .letter-display {
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 15px;
            padding: 40px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .letter {
            font-weight: bold;
            color: #1f2937;
            line-height: 1;
        }
        
        .level-info {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-yes {
            background: #10b981;
            color: white;
        }
        
        .btn-yes:hover {
            background: #059669;
        }
        
        .btn-no {
            background: #ef4444;
            color: white;
        }
        
        .btn-no:hover {
            background: #dc2626;
        }
        
        .btn-primary {
            background: #4f46e5;
            color: white;
            grid-column: 1 / -1;
        }
        
        .btn-primary:hover {
            background: #4338ca;
        }
        
        .progress {
            background: #e5e7eb;
            border-radius: 10px;
            height: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: #4f46e5;
            height: 100%;
            transition: width 0.3s;
        }
        
        .progress-text {
            text-align: center;
            font-size: 12px;
            color: #6b7280;
        }
        
        .result {
            text-align: center;
            padding: 30px 20px;
        }
        
        .result-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .result-good {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .result-warning {
            background: #fef3c7;
            color: #d97706;
        }
        
        .result-bad {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .result-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #1f2937;
        }
        
        .result-message {
            font-size: 16px;
            color: #4b5563;
            margin-bottom: 20px;
        }
        
        .contact-info {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }
        
        .contact-info h4 {
            color: #1e40af;
            margin-bottom: 10px;
        }
        
        .whatsapp-btn {
            background: #25d366;
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 10px;
            display: inline-block;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .whatsapp-btn:hover {
            background: #20ba5a;
        }
        
        .hidden {
            display: none;
        }
        
        .eye-selector {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .eye-btn {
            padding: 10px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .eye-btn.active {
            border-color: #4f46e5;
            background: #eef2ff;
            color: #4f46e5;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla de Inicio -->
        <div id="inicio" class="card">
            <div class="header">
                <div class="logo">üëÅÔ∏è</div>
                <h1>Test de Vista</h1>
                <p class="subtitle">Urbana Visi√≥n - Evaluaci√≥n gratuita</p>
            </div>
            
            <div class="instructions">
                <h3>üìã Instrucciones Importantes</h3>
                <div class="step">
                    <div class="step-number">1</div>
                    <div>Extiende tu brazo completamente y sost√©n el celular a esa distancia</div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div>Tapa un ojo con la mano (empezaremos con ojo derecho tapado)</div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div>Mira las letras que aparecen y responde si las ves claramente</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div>Las letras van de grande a peque√±a - responde honestamente</div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div>Si no ves las letras peque√±as, necesitas revisar tu vista</div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="iniciarTest()">
                Comenzar Test de Vista
            </button>
        </div>
        
        <!-- Pantalla de Test -->
        <div id="test" class="hidden">
            <div class="card">
                <div class="progress">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">Nivel 1 de 8</div>
            </div>
            
            <div class="card">
                <div class="eye-selector">
                    <button class="eye-btn active" id="btnAmbos" onclick="cambiarOjo('ambos')">
                        üëÅÔ∏èüëÅÔ∏è Ambos
                    </button>
                    <button class="eye-btn" id="btnIzquierdo" onclick="cambiarOjo('izquierdo')">
                        üëÅÔ∏è Izquierdo
                    </button>
                    <button class="eye-btn" id="btnDerecho" onclick="cambiarOjo('derecho')">
                        üëÅÔ∏è Derecho
                    </button>
                </div>
                
                <div class="level-info" id="levelInfo">Nivel: Muy f√°cil</div>
                
                <div class="test-area">
                    <p style="color: #ef4444; font-weight: bold; margin-bottom: 15px;">
                        üìè Extiende tu brazo completamente
                    </p>
                    <p style="color: #f59e0b; font-weight: bold; margin-bottom: 20px;" id="eyeInstruction">
                        üñêÔ∏è Tapa tu ojo derecho con la mano
                    </p>
                    
                    <div class="letter-display">
                        <div class="letter" id="letter">E</div>
                    </div>
                    
                    <p style="font-size: 16px; color: #4b5563;">
                        ¬øPuedes ver claramente esta letra?
                    </p>
                </div>
                
                <div class="buttons">
                    <button class="btn btn-yes" onclick="responder(true)">
                        ‚úÖ S√ç VEO
                    </button>
                    <button class="btn btn-no" onclick="responder(false)">
                        ‚ùå NO VEO
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Pantalla de Resultado -->
        <div id="resultado" class="hidden">
            <div class="card">
                <div class="result">
                    <div class="result-icon" id="resultIcon">‚úÖ</div>
                    <div class="result-title" id="resultTitle">Tu vista parece estar bien</div>
                    <div class="result-message" id="resultMessage">
                        Pudiste ver la mayor√≠a de letras correctamente
                    </div>
                    
                    <div id="resultDetails" style="text-align: left; background: #f9fafb; padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <h4 style="margin-bottom: 10px;">Resumen del test:</h4>
                        <div id="summaryText"></div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="reiniciarTest()">
                        üîÑ Hacer nuevo test
                    </button>
                </div>
                
                <div class="contact-info">
                    <h4>üè• Urbana Visi√≥n Oficial</h4>
                    <p style="color: #1e40af; margin-bottom: 10px;">
                        Agenda tu cita profesional con nosotros
                    </p>
                    <a href="https://wa.me/18097135307?text=Hola Urbana Visi√≥n, hice el test de vista y necesito agendar una cita" class="whatsapp-btn">
                        üì± WhatsApp: 809-713-5307
                    </a>
                    <p style="font-size: 12px; color: #6b7280; margin-top: 15px;">
                        * Este test es solo referencial. Para diagn√≥stico profesional, visita Urbana Visi√≥n.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuraci√≥n del test - Letras m√°s peque√±as y desafiantes
        const niveles = [
            { tamano: '80px', letra: 'E', nivel: 'Grande' },
            { tamano: '50px', letra: 'F', nivel: 'Medio' },
            { tamano: '35px', letra: 'P', nivel: 'Normal' },
            { tamano: '25px', letra: 'T', nivel: 'Peque√±o' },
            { tamano: '18px', letra: 'O', nivel: 'Muy peque√±o' },
            { tamano: '14px', letra: 'Z', nivel: 'Diminuto' },
            { tamano: '12px', letra: 'D', nivel: 'M√≠nimo' },
            { tamano: '10px', letra: 'R', nivel: 'Micro' }
        ];
        
        let nivelActual = 0;
        let respuestas = [];
        let ojoActual = 'ambos';
        
        function iniciarTest() {
            document.getElementById('inicio').classList.add('hidden');
            document.getElementById('test').classList.remove('hidden');
            actualizarTest();
        }
        
        function cambiarOjo(ojo) {
            ojoActual = ojo;
            
            // Actualizar botones
            document.querySelectorAll('.eye-btn').forEach(btn => btn.classList.remove('active'));
            
            if (ojo === 'ambos') {
                document.getElementById('btnAmbos').classList.add('active');
                document.getElementById('eyeInstruction').textContent = 'üëÅÔ∏èüëÅÔ∏è Usa ambos ojos';
            } else if (ojo === 'izquierdo') {
                document.getElementById('btnIzquierdo').classList.add('active');
                document.getElementById('eyeInstruction').textContent = 'üñêÔ∏è Tapa tu ojo DERECHO con la mano';
            } else {
                document.getElementById('btnDerecho').classList.add('active');
                document.getElementById('eyeInstruction').textContent = 'üñêÔ∏è Tapa tu ojo IZQUIERDO con la mano';
            }
        }
        
        function actualizarTest() {
            const nivel = niveles[nivelActual];
            
            document.getElementById('letter').style.fontSize = nivel.tamano;
            document.getElementById('letter').textContent = nivel.letra;
            document.getElementById('levelInfo').textContent = `Nivel: ${nivel.nivel}`;
            document.getElementById('progressText').textContent = `Nivel ${nivelActual + 1} de ${niveles.length}`;
            
            const progreso = ((nivelActual + 1) / niveles.length) * 100;
            document.getElementById('progressBar').style.width = progreso + '%';
        }
        
        function responder(puedeVer) {
            respuestas.push({
                nivel: nivelActual,
                puedeVer: puedeVer,
                ojo: ojoActual,
                tamano: niveles[nivelActual].tamano
            });
            
            if (nivelActual < niveles.length - 1) {
                nivelActual++;
                actualizarTest();
            } else {
                mostrarResultado();
            }
        }
        
        function mostrarResultado() {
            document.getElementById('test').classList.add('hidden');
            document.getElementById('resultado').classList.remove('hidden');
            
            const respuestasPositivas = respuestas.filter(r => r.puedeVer).length;
            const porcentaje = (respuestasPositivas / respuestas.length) * 100;
            
            let resultado;
            if (porcentaje >= 85) {
                resultado = {
                    icon: '‚úÖ',
                    title: 'Tu vista parece estar bien',
                    message: 'Pudiste ver la mayor√≠a de letras correctamente. Mant√©n revisiones regulares.',
                    class: 'result-good'
                };
            } else if (porcentaje >= 60) {
                resultado = {
                    icon: '‚ö†Ô∏è',
                    title: 'Podr√≠as necesitar lentes',
                    message: 'Tienes algunas dificultades con letras peque√±as. Te recomendamos una consulta.',
                    class: 'result-warning'
                };
            } else {
                resultado = {
                    icon: '‚ùå',
                    title: 'Recomendamos consulta urgente',
                    message: 'Tienes dificultades evidentes con la visi√≥n. Es importante que visites un profesional.',
                    class: 'result-bad'
                };
            }
            
            document.getElementById('resultIcon').textContent = resultado.icon;
            document.getElementById('resultIcon').className = `result-icon ${resultado.class}`;
            document.getElementById('resultTitle').textContent = resultado.title;
            document.getElementById('resultMessage').textContent = resultado.message;
            
            // Mostrar resumen detallado
            let resumen = `<p>Pudiste ver <strong>${respuestasPositivas} de ${respuestas.length}</strong> letras claramente.</p>`;
            resumen += `<p style="margin-top: 10px;">Porcentaje de aciertos: <strong>${Math.round(porcentaje)}%</strong></p>`;
            
            document.getElementById('summaryText').innerHTML = resumen;
        }
        
        function reiniciarTest() {
            nivelActual = 0;
            respuestas = [];
            ojoActual = 'ambos';
            
            document.getElementById('resultado').classList.add('hidden');
            document.getElementById('inicio').classList.remove('hidden');
            
            // Resetear selecci√≥n de ojo
            cambiarOjo('ambos');
        }
    </script>
</body>
</html>
